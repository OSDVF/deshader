{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "GDB - Launcher Hidden & GLFW",
            "type": "gdb",
            "request": "launch",
            "cwd": "${workspaceRoot}",
            "target": "./zig-out/bin/deshader-examples/glfw",
            "preLaunchTask": "Start Editor Server",
            "env": {
                "DESHADER_LIB": "zig-out/lib/libdeshader.so",
                "DESHADER_PROCESS": "glfw",
                "LD_PRELOAD": "${workspaceRoot}/zig-out/lib/libdeshader.so",
            },
        },
        {
            "name": "GDB - Launcher GLFW Hidden",
            "type": "gdb",
            "request": "launch",
            "cwd": "${workspaceRoot}",
            "target": "./zig-out/bin/deshader-run",
            "preLaunchTask": "Build Launcher",
            "arguments": "-y zig-out/bin/deshader-examples/glfw",
            "env": {
                "DESHADER_LIB": "zig-out/lib/libdeshader.so",
                "DESHADER_GUI": "hidden",
            },
        },
        {
            "name": "GDB - Launcher Editor",
            "type": "gdb",
            "request": "launch",
            "cwd": "${workspaceRoot}",
            "target": "./zig-out/bin/deshader-run",
            "env": {
                "DESHADER_LIB": "zig-out/lib",
                "DESHADER_IGNORE_PROCESS": "gdb:zsh:llvm-symbolizer:code",
            },
        },
        {
            "name": "GDB - Launcher GUI",
            "type": "gdb",
            "request": "launch",
            "cwd": "${workspaceRoot}/..",
            "target": "./deshader/zig-out/bin/deshader-run",
            "arguments": "-g",
            "env": {
                "DESHADER_LIB": "deshader/zig-out/lib",
                "DESHADER_IGNORE_PROCESS": "gdb:zsh:llvm-symbolizer:code",
            },
        },
        {
            "name": "CPPDBG - Launcher",
            "request": "launch",
            "type": "cppvsdbg",
            "program": "${workspaceRoot}/zig-out/bin/deshader-run",
            "args": [
                "-y",
                "zig-out/bin/deshader-examples/glfw.exe"
            ],
            "preLaunchTask": "Build Launcher",
            "cwd": "${workspaceRoot}"
        },
        {
            "name": "CPPDBG - Launcher GUI",
            "request": "launch",
            "type": "cppvsdbg",
            "program": "${workspaceRoot}/zig-out/bin/deshader-run",
    
            "preLaunchTask": "Build Launcher",
            "cwd": "${workspaceRoot}"
        },
        {
            "name": "CPPDBG - Examples-All",
            "request": "launch",
            "type": "cppvsdbg",
            "program": "${workspaceRoot}/zig-out/bin/deshader-examples-all",
    
            "preLaunchTask": "Build Examples",
            "cwd": "${workspaceRoot}/zig-out/bin/"
        },
        {
            "name": "GDB - Generate Stubs",
            "type": "gdb",
            "request": "launch",
            "cwd": "${workspaceRoot}",
            "target": "./zig-out/bin/generate_stubs",
            "preLaunchTask": "Build Generate Stubs",
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - Examples",
            "target": "${workspaceRoot}/zig-out/bin/deshader-examples-all",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Examples",
            "autorun": [
                "set environment LD_PRELOAD ${workspaceRoot}/zig-out/lib/libdeshader.so",
                "set environment DYLD_INSERT_LIBRARIES ${workspaceRoot}/zig-out/lib/libdeshader.dylib",
            ],
            "env": {
                "DESHADER_IGNORE_PROCESS": "gdb:zsh:deshader-examples-all",
            },
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - Editor",
            "target": "../bin/deshader-examples/editor",
            "cwd": "${workspaceRoot}/zig-out/lib",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Examples",
            "env": {
                "DESHADER_COMMANDS_WS": "8082",
                "DESHADER_IGNORE_PROCESS": "gdb:zsh",
            },
            "autorun": [
                "set environment LD_PRELOAD ${workspaceRoot}/zig-out/lib/libdeshader.so"
            ],
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - GLFW",
            "target": "./zig-out/bin/deshader-examples/glfw",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Examples",
            "env": {
                "DESHADER_IGNORE_PROCESS": "gdb:zsh:lldb",
                "DESHADER_PROCESS": "glfw",
                "LD_PRELOAD": "${workspaceRoot}/zig-out/lib/libdeshader.so",
                "DYLD_INSERT_LIBRARIES": "${workspaceRoot}/zig-out/lib/libdeshader.dylib",
                "DESHADER_COMMANDS_WS": "8082",
                "DESHADER_START_SERVER": "1",
                "DESHADER_LSP": "8083",
                "DESHADER_GUI": "1",
                "POWER_SAVE": "100",
                "__NV_PRIME_RENDER_OFFLOAD": "0",
                "G_DEBUG_MESSAGES": "all",
                
            }
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - SDF",
            "target": "./zig-out/bin/deshader-examples/sdf",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Examples",
            "autorun": [
                "set environment LD_PRELOAD ${workspaceRoot}/zig-out/lib/libdeshader.so"
            ],
            "env": {
                "DESHADER_IGNORE_PROCESS": "gdb:zsh",
                "DESHADER_LIB_ROOT": "/usr/lib/",
                "DESHADER_COMMANDS_WS": "8082",
                "DESHADER_START_SERVER": "1",
                "DESHADER_LSP": "8083",
                "POWER_SAVE": "100",
                
            }
        },
        {
            "type": "cppvsdbg",
            "request": "launch",
            "name": "Windows - GLFW",
            "target": "${workspaceRoot}\\zig-out\\bin\\deshader-examples\\glfw.exe",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "autorun": [
                "set environment LD_PRELOAD ${workspaceRoot}/zig-out/lib/libdeshader.so"
            ],
            "env": {
                "DESHADER_PROCESS": "glfw",
                "DESHADER_COMMANDS_WS": "8082",
                "DESHADER_START_SERVER": "1",
                "DESHADER_LSP": "8083",
                "POWER_SAVE": "100",
                "__NV_PRIME_RENDER_OFFLOAD": "0",
                "__GLX_VENDOR_LIBRARY_NAME": "mesa"
            }
        },
        {
            "type": "cppvsdbg",
            "request": "launch",
            "program": "${workspaceRoot}/zig-out/bin/deshader-examples/glfw.exe",
            "name": "CPPDBG - GLFW",
            "cwd": "${workspaceRoot}/zig-out/bin/",
            "environment": [
                {
                    "name": "DESHADER_GUI",
                    "value": "1"
                }
            ]
        },
        {
            "type": "cppvsdbg",
            "request": "launch",
            "program": "${workspaceRoot}/zig-out/bin/deshader-examples/linked_cpp.exe",
            "name": "CPPDBG - Editor Linked",
            "cwd": "${workspaceRoot}/zig-out/lib/",
            "environment": [
                {
                    "name": "DESHADER_COMMANDS_WS",
                    "value": "8082"
                }
            ]
        },
        {
            "type": "cppvsdbg",
            "request": "launch",
            "program": "debug_commands.exe",
            "name": "CPPDBG - Debug Commands",
            "cwd": "${workspaceRoot}/zig-out/bin/deshader-examples/",
            "preLaunchTask": "Build Examples",
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - Editor in C++",
            "target": "./zig-out/bin/deshader-examples/linked_cpp",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Examples",
            "env": {
                "LD_LIBRARY_PATH": "${workspaceRoot}/zig-out/lib",
                "DYLD_LIBRARY_PATH": "${workspaceRoot}/zig-out/lib",
            },
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - Debug Commands",
            "target": "./zig-out/bin/deshader-examples/debug_commands",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Examples",
            "autorun": [
                "set environment LD_PRELOAD ${workspaceRoot}/zig-out/lib/libdeshader.so"
            ],
            "env": {
                "DESHADER_IGNORE_PROCESS": "gdb:zsh",
            }
        },
        {
            "name": "GDB Attach",
            "type": "gdb",
            "request": "attach",
            "executable": "${workspaceRoot}/zig-out/bin/deshader-examples/glfw.exe",
            "remote": true,
            "target": "localhost:42887",
            "cwd": "${workspaceRoot}",
        },
        {
            "name": "LLDB Attach", // Use for Wine debugging
            "type": "lldb", // Execute add-dsym zig-out/bin/deshader-glfw.pdb afterwards to get smybols
            "request": "attach",
            "pid": "${command:pickMyProcess}",
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - GLFW in C++",
            "target": "./zig-out/bin/deshader-examples/glfw_cpp",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Examples",
            "autorun": [
                "set environment LD_PRELOAD ${workspaceRoot}/zig-out/lib/libdeshader.so",
                "set environment DYLD_INSERT_LIBRARIES ${workspaceRoot}/zig-out/lib/libdeshader.dylib"
            ]
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - Editor in C++ from CMake",
            "target": "${workspaceRoot}/build/example_editor",
            "cwd": "${workspaceRoot}",
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - GLFW in C++ from CMake",
            "target": "${workspaceRoot}/build/example_glfw",
            "cwd": "${workspaceRoot}",
            "autorun": [
                "set environment LD_PRELOAD ${workspaceRoot}/build/lib/libdeshader.so",
                "set environment DESHADER_PROCESS example_glfw"
            ],
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "GDB - Header Generator",
            "target": "./zig-out/bin/generate_headers",
            "cwd": "${workspaceRoot}",
            "valuesFormatting": "parseText",
            "preLaunchTask": "Build Headers Generator",
        }
    ]
}